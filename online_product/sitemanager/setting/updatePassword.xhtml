<!--

   Copyright 2001-15 Creatus Inc.,
   2328 Walsh Avenue, Suite G, Santa Clara, CA 95051, U.S.A.
   All rights reserved.

   This software is the confidential and proprietary information
   of Creatus Inc. ("Confidential Information").  You shall not disclose
   such Confidential Information and shall use it only in accordance
   the terms of the license agreement you entered into with
   Creatus Inc.

   Company        : Creatus Inc.
   Author         : Sathish
   Date Created   : 03/02/2015
   Last Modified  : 03/10/2015
   Modifier       : Hailing Li
   Description    : Displays the update new password popup
   					After the Lead Manager Migration from coldfusion to JBoss
-->	
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:form id="chPwdForm">
		<a4j:outputPanel id="changePassword2Render" ajaxRendered="true">
		<c:if test="${not empty userBean.message}">
				<rich:panel>
			  <h:outputLabel value="Invalid Password" styleClass="orange12px fontWeightBold" />
				<h:panelGrid styleClass="padding10px textAlignLeft">
						<h:panelGroup> 
							<h:outputLabel value="Change password for&nbsp;" styleClass="black11px fontWeightBold"/>
							<c:choose><c:when test="#{subUserBean.subUserChangePwdFlag == true}"><u><b>#{subUserBean.loginId}</b></u></c:when>
							<c:otherwise><u><b>#{userBean.loginId}</b></u></c:otherwise></c:choose>
						</h:panelGroup>
						<h:outputLabel value="To protect account, please verify password to continue." styleClass="fontWeightBold" />
						<h:panelGroup styleClass="padding1px"/>
						<h:column>
							<h:outputLabel value="Enter old Password:" styleClass="black11px"/>
							<h:inputSecret value="#{subUserBean.password}" id="currentPassword" size="30" maxlength="30" style="height:19px" autocomplete="off"/>
						</h:column>
						<h:panelGroup styleClass="padding1px"/>
						<h:column >
							<h:panelGroup style="padding-left:90px"/>
							
							<!-- ok button -->
							<a4j:commandButton value=" " styleClass="okButtonImage" style="padding-left:10px" render="changePassword2Render" limitRender="true" />&nbsp;&nbsp;
							
							<!-- back button -->
							<a4j:commandButton value=" " styleClass="backButtonImage" onclick="#{rich:component('changePassword2')}.hide();return false;"/>
						</h:column>
					</h:panelGrid>
				</rich:panel>
				
				<script>
				document.getElementById("chPwdForm:currentPassword").value = '';
				</script>
		</c:if>
		<c:if test="${empty userBean.message}">
		
		  <rich:panel>
			<c:choose>
				 <c:when test="${fn:containsIgnoreCase(userBean.subscriberType, 'sample') || fn:containsIgnoreCase(userBean.subscriberType, 'emp') || fn:containsIgnoreCase(userBean.subscriberType, 'trial') || fn:containsIgnoreCase(userBean.subscriberType, 'icn_trial')}">
					<h:panelGrid styleClass="padding10px">
						<h:outputLabel value="This services is available for subscribed user only. For more information, please call us at 800.652.0008." styleClass="black12px"/>
					</h:panelGrid>
				 </c:when>
				 <c:otherwise>
				 	<h:panelGroup styleClass="textAlignLeft"> 
							<h:outputLabel value="Change password for&nbsp;" styleClass="black11px fontWeightBold"/>
							<c:choose><c:when test="#{subUserBean.subUserChangePwdFlag == true}"><u><b>#{subUserBean.loginId}</b></u></c:when>
							<c:otherwise><u><b>#{userBean.loginId}</b></u></c:otherwise></c:choose>
					</h:panelGroup> 
					<h:outputLabel value="Please enter new password and retype it to confirm." styleClass="fontWeightBold textAlignLeft" />
					<h:panelGroup styleClass="padding1px"/>
					<h:panelGroup styleClass="padding1px"/>
					<rich:message id="comErr" for="new_pwd"/>
								<h:panelGrid styleClass="padding10px textAlignLeft" columns="2" columnClasses="one,two">
						 <h:outputLabel value="Enter new password:" styleClass="black11px"/>
						<h:inputSecret id="new_pwd" size="30" maxlength="30" style="height:19px" autocomplete="off"/>
						<h:outputLabel value="Confirm password:" styleClass="black11px"/>
						<h:inputSecret id="conf_pwd" size="30" maxlength="30" style="height:19px" autocomplete="off"/>
						<h:panelGroup styleClass="padding1px"/>
						<h:panelGroup styleClass="padding1px"/>
						<h:panelGroup styleClass="padding1px"/>
						<h:column>
							<!-- ok button -->
							<a4j:commandButton value=" " styleClass="okButtonImage"  
							onclick="return CDC_check_form();" oncomplete="#{rich:component('changePassword2')}.hide();" style="padding-left:10px"/>&nbsp;&nbsp;
							
							<!-- back button -->
							<a4j:commandButton value=" " styleClass="backButtonImage" onclick="#{rich:component('changePassword')}.show(); #{rich:component('changePassword2')}.hide();"/>
						</h:column>
					</h:panelGrid>
				 </c:otherwise>
			 </c:choose>
			</rich:panel>
		
			<script>
			document.getElementById("chPwdForm:new_pwd").value = '';
			document.getElementById("chPwdForm:conf_pwd").value = '';
			</script>
	</c:if>
	</a4j:outputPanel>
	</h:form>
</ui:composition>
