<!--

   Copyright 2001-15 Creatus Inc.,
   2328 Walsh Avenue, Suite G, Santa Clara, CA 95051, U.S.A.
   All rights reserved.

   This software is the confidential and proprietary information
   of Creatus Inc. ("Confidential Information").  You shall not disclose
   such Confidential Information and shall use it only in accordance
   the terms of the license agreement you entered into with
   Creatus Inc.

   Company        : Creatus Inc.
   Author         : Sathish
   Date Created   : 03/02/2015
   Last Modified  : 03/10/2015
   Modifier       : Hailing Li
   Description    : Displays the change password popup
   					After the Lead Manager Migration from coldfusion to JBoss
-->	
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h5="http://xmlns.jcp.org/jsf/passthrough">

<!-- Ask Old Password Popup -->
<rich:popupPanel id="changePassword" modal="true"  movable="true" autosized="true">
						 
		<f:facet name="header">
			Change Password
		</f:facet>
		<f:facet name="controls">
			<h:commandButton value=" " type="button" styleClass="popupCloseImage" onclick="#{rich:component('changePassword')}.hide(); return false;"/>
		</f:facet>
		<rich:hotKey key="Esc">
			<rich:componentControl target="changePassword" operation="hide"/>
		</rich:hotKey>
		
		<h:form id="oldPassword">
		<a4j:outputPanel id="changePasswordRender" ajaxRendered="true">
		  <rich:panel>
			<c:choose>
				 <c:when test="${fn:containsIgnoreCase(userBean.subscriberType, 'sample') || fn:containsIgnoreCase(userBean.subscriberType, 'emp') || fn:containsIgnoreCase(userBean.subscriberType, 'trial') || fn:containsIgnoreCase(userBean.subscriberType, 'icn_trial')}">
					<h:panelGrid styleClass="padding10px">
						<h:outputLabel value="This services is available for subscribed user only. For more information, please call us at 800.652.0008." styleClass="black12px"/>
					</h:panelGrid>
				 </c:when>
				 <c:otherwise>
				<h:panelGrid styleClass="padding10px textAlignLeft">
						<h:panelGroup> 
							<h:outputLabel value="Change password for&nbsp;" styleClass="black11px fontWeightBold"/>
							<c:choose><c:when test="#{subUserBean.subUserChangePwdFlag == true}"><u><b>#{subUserBean.loginId}</b></u></c:when>
							<c:otherwise><u><b>#{userBean.loginId}</b></u></c:otherwise></c:choose>
						</h:panelGroup>
						<h:outputLabel value="To protect account, please verify password to continue." styleClass="fontWeightBold" />
						<h:panelGroup styleClass="padding1px"/>
						<h:column>
							<h:outputLabel value="Enter old Password:" styleClass="black11px"/>
							<h:inputSecret value="#{subUserBean.password}" id="currentPassword" size="30" maxlength="30" style="height:19px" autocomplete="off"/>
						</h:column>
						<h:panelGroup styleClass="padding1px"/>
						<h:column >
							<h:panelGroup style="padding-left:90px"/>
							
							<!-- ok button -->
							<a4j:commandButton value=" " styleClass="okButtonImage" style="padding-left:10px" render="changePassword2Render" limitRender="true" 
							oncomplete="#{rich:component('changePassword2')}.show();#{rich:component('changePassword')}.hide();" />&nbsp;&nbsp;
							
							<!-- back button -->
							<a4j:commandButton value=" " styleClass="backButtonImage" onclick="#{rich:component('changePassword')}.hide(); return false;"/>
						</h:column>
					</h:panelGrid>
				 </c:otherwise>
			 </c:choose>
			</rich:panel>
			</a4j:outputPanel>
		</h:form>
</rich:popupPanel>

<!-- End Of Ask Old Password Popup -->

<!-- Change Password Popup Starts -->	

<rich:popupPanel id="changePassword2" modal="true"  movable="true" width="400" height="250">
						 
		<f:facet name="header">
			Change Password
		</f:facet>
		<f:facet name="controls">
			<h:commandButton value=" " type="button" styleClass="popupCloseImage" onclick="#{rich:component('changePassword2')}.hide(); return false;"/>
		</f:facet> 
		<rich:hotKey key="Esc">
			<rich:componentControl target="changePassword2" operation="hide"/>
		</rich:hotKey>
		
		<ui:include src="#{userSettingController.checkPassword(request)}" />
		
</rich:popupPanel>

<!-- End of Change Password Popup  -->
</ui:composition>

