 <!--

   Copyright 2001-15 Creatus Inc.,
   2328 Walsh Avenue, Suite G, Santa Clara, CA 95051, U.S.A.
   All rights reserved.

   This software is the confidential and proprietary information
   of Creatus Inc. ("Confidential Information").  You shall not disclose
   such Confidential Information and shall use it only in accordance
   the terms of the license agreement you entered into with
   Creatus Inc.

   Company        : Creatus Inc.
   Author         :	Creatus
   Date Created   :	04/08/2015
   Last Modified  : 04/08/2015
   Modifier       : Sathish
   Description    :	Displays the Edit Event UI to add Event to the Calender
 					After the Lead Manager Migration from coldfusion to JBoss
-->
<!DOCTYPE html PUBLIC "-//W3C//Dtd XHTML 1.0 Transitional//EN" "http://www.w3.org/tr/xhtml1/Dtd/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	 xmlns:h5="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
	  xmlns:a4j="http://richfaces.org/a4j" 
	 xmlns:rich="http://richfaces.org/rich">
	  
	 	<h:outputStylesheet name="calendar/add-event.css" library="css"/>
		
	 	<rich:tabPanel switchType="client">
			<rich:tab id="eventTab" header=" " headerClass="editEventsActive">
				<h:panelGrid width="540"    cellspacing="2" cellpadding="2" border="0"  bgcolor="white" styleClass="eventsTable" rowClasses=" , , ,emailHotList">
					<h:panelGrid width="540"    cellspacing="2" cellpadding="2" border="0"  bgcolor="EFF4FA" styleClass="grey10pxbold padding10px" rowClasses="border-bottom">
							<h:outputLabel value="To edit this Calendar Event, please modify the fields below as needed."/> 
						</h:panelGrid>
						<h:panelGrid  width="498" border="0" cellpadding="0" cellspacing="10" columns="2" columnClasses="columnOne,">
							 <c:set var = "event" value="add" scope="session"/>
							<!-- Title -->
							<h:column/>
							<rich:message id="titleErr" for="title2" />
							<h:outputLabel value="Title" styleClass="grey10pxbold"/>
							<h:inputText id="title2" size="40" maxlength="100" value="#{calendarBean.eventTitle}"/>
							<h:column/>
							<rich:message id="noteErr" for="note" />
							<h:outputLabel value="Note" styleClass="grey10pxbold"/>
							<h:inputTextarea id="note" size="40"  cols="38" rows="4" value="#{calendarBean.eventNotes}"/>
							
							<!-- Event Date -->
							<h:column/>
							<rich:message id="eventDateErr" for="eventDate" />
							<h:outputLabel value="Event Date" styleClass="grey10pxbold"/>
							<rich:calendar id="eventDate"  value="#{calendarBean.eventDate}" popup="true" datePattern="#{userBean.datePattern}" inputSize="10" maxlength="9" 
							showWeeksBar="false" dayDisableFunction="disablementFunction" dayClassFunction="disabledClassesProv"/> 
							
							<!-- Event Time -->
							<h:column/>
							<rich:message id="eventTimeErr" for="hour" />
							<h:outputLabel value="Event Time" styleClass="grey10pxbold"/>
							<h:panelGroup>
								<!-- Hour -->
								<h:selectOneMenu id="hour" value="#{calendarBean.hour}">
									<f:selectItem itemValue="" itemLabel="Hour"/>
									<c:forEach var="hourCount" begin="1" end="12">
										<f:selectItem itemValue="#{hourCount}" itemLabel="#{hourCount}"/>
									</c:forEach> 
								</h:selectOneMenu>&nbsp;
								<!-- Minute -->
								<h:selectOneMenu id="minute" value="#{calendarBean.minute}">
									<f:selectItem itemValue=" " itemLabel="Minute"/>
									<f:selectItem itemValue="00" itemLabel="00"/>
									<f:selectItem itemValue="15" itemLabel="15"/>
									<f:selectItem itemValue="30" itemLabel="30"/>
									<f:selectItem itemValue="45" itemLabel="45"/>
								</h:selectOneMenu>&nbsp;
								<!-- AM/PM -->
								<h:selectOneMenu id="AmPm" value="#{calendarBean.AMorPM}">
									<f:selectItem itemValue="AM" itemLabel="AM"/>
									<f:selectItem itemValue="PM" itemLabel="PM"/>
								</h:selectOneMenu>
							</h:panelGroup>
							<h:outputLabel value="Event Type" styleClass="grey10pxbold"/>
							<h:selectOneMenu id="eventType" value="#{calendarBean.eventType}" rendered="#{not empty calendarBean.event and calendarBean.event eq 'calendar'}">
									<f:selectItem itemValue="Personal" itemLabel="Personal"/> 
									<c:if test="#{calendarBean.eventType ne 'Personal'}">
										<f:selectItem itemValue="Project-Bid" itemLabel="Project-Bid"/> 
										<f:selectItem itemValue="Project-PreBid" itemLabel="Project-PreBid"/>  
									</c:if>
									<f:selectItem itemValue="Project" itemLabel="Project"/>
							</h:selectOneMenu>
							<h:outputLabel value="Project" rendered="#{not empty calendarBean.event and calendarBean.event eq 'project'}"/>
						 </h:panelGrid> 
					 
							<h:selectOneRadio id="reminder" styleClass="grey10pxbold reminder"  style="display: inline-table;float:right" onclick="setFormId('editEventForm');javascript:changreminder(this);setHotListReminder('#{calendarBean.calendarId}','#{userBean.loginEmail}')" value="#{calendarBean.reminderFlag}" >&nbsp;
									<f:selectItem itemValue="0" itemLabel="Do not send reminder" />
									<f:selectItem itemValue="1" itemLabel="Send Reminder" />
									<f:selectItem itemValue="2" itemLabel="Send Recurring Reminder" />
							</h:selectOneRadio> 
						 
						<!-- Reminder Information -->
						<h:panelGroup styleClass="gre10pxbold hideClass" style="display:none">
							<h:outputLabel value="Reminder Information" />
						</h:panelGroup>
					
						<h:panelGroup id="remiderBlock" styleClass="hideClass" style="display:none"> 
							<h:panelGrid  width="498" border="0" cellpadding="0" cellspacing="2" columns="2" columnClasses="columnOne,">
							
								
								<!-- Every Day -->
								<h:outputText value="Every Day" styleClass="boldpx"/>
								 
								<h:selectOneRadio id="Frequency_everyday" onclick="javascript:checkFrequency('everyday');"  value="#{hotListBean.everyDay}">
									<f:selectItem itemValue="D" />
								</h:selectOneRadio>
								
								<!-- Every Week -->
								<h:column/><rich:message for="Frequency_everyweek" id="daysMsg"/>
								 <h:outputText value="Every Week" styleClass="boldpx"/>
								<h:panelGroup>
										<h:selectOneRadio id="Frequency_everyweek" 	onclick="javascript:checkFrequency('everyweek');" style="float:left;" value="#{hotListBean.everyWeek}" >
											<f:selectItem itemValue="W" />
										</h:selectOneRadio>
											   <c:set var="SHORTDAYLIST" value="M,T,W,R,F,S,N" /> 
											   <c:set  var="LONGDAYLIST" value="Mon,Tue,Wed,Thu,Fri,Sat,Sun" /> 
											   <c:set var="SHORTDAYLIST" value="${fn:split(SHORTDAYLIST, ',')}" />
												<c:set var="LONGDAYLIST" value="${fn:split(LONGDAYLIST, ',')}" />
												<h:selectManyCheckbox id="Weekly" value="#{hotListBean.daysInEveryWeek}" onclick="javascript:checkWeekly();">
														<c:forEach begin="0" end="${fn:length(SHORTDAYLIST)-1}"	var="ndx"> 
															<c:set var="THISDAY"  value="${fn:trim(SHORTDAYLIST[ndx])}" />
															  <f:selectItem  itemValue="${THISDAY}" itemLabel="${LONGDAYLIST[ndx]}" />
														</c:forEach>
												</h:selectManyCheckbox>
								 </h:panelGroup>
								 
								 <!-- Every Year -->
								 <h:outputText value="Every Year" styleClass="boldpx"/>
									 <h:panelGroup>
										<h:selectOneRadio id="Frequency_everyYear" style="display:inline-table;" onclick="javascript:checkFrequency('everyyear');"  value="#{hotListBean.everyYear}" >
											<f:selectItem itemValue="Y" />
									</h:selectOneRadio>	
										<h:selectOneMenu id="everyYearMonth" onfocus="checkMonthly();" value="#{hotListBean.everyYearMonth}">
											<f:selectItem  itemValue="SelectMonth" itemLabel="SelectMonth" />
											<f:selectItem itemValue="1" itemLabel="January"/>
											<f:selectItem itemValue="2" itemLabel="February"/>
											<f:selectItem itemValue="3" itemLabel="March"/>
											<f:selectItem itemValue="4" itemLabel="April"/>
											<f:selectItem itemValue="5" itemLabel="May"/>
											<f:selectItem itemValue="6" itemLabel="June"/>
											<f:selectItem itemValue="7" itemLabel="July"/>
											<f:selectItem itemValue="8" itemLabel="August"/>
											<f:selectItem itemValue="9" itemLabel="September"/>
											<f:selectItem itemValue="10" itemLabel="October"/>
											<f:selectItem itemValue="11" itemLabel="November"/>
											<f:selectItem itemValue="12" itemLabel="December"/> 
										</h:selectOneMenu>&nbsp;
										<h:selectOneMenu id="everyYear"   onfocus="checkMonthly();" value="#{hotListBean.everyYearDay}">
											<f:selectItem  itemValue="SelectDay" itemLabel="SelectDay" />
											 <c:forEach var="LoopCount" begin="1" end="31" step="1">
													<f:selectItem itemValue="#{LoopCount}" itemLabel="#{LoopCount}"/>
											</c:forEach> 
										</h:selectOneMenu> 
									</h:panelGroup>
								 
								<!-- Every Month -->	
								<h:outputText value="Every Month" styleClass="boldpx"/> 
								 <h:panelGroup>
									<h:inputHidden 	h5:id="Frequency_everymonth" value="M"/> 
									<h:selectOneRadio id="Frequency_everymonth" onclick="javascript:checkFrequency('everymonth');"  style="display:inline-table;" value="#{hotListBean.everyMonth}">
											<f:selectItem itemValue="M" />
									</h:selectOneRadio>	
									
									<h:outputText value="On" styleClass="boldpx"/>
									<h:selectOneMenu id="OnDay"   onfocus="checkOnDate();" value="#{hotListBean.onDay}">
										<c:forEach var="LoopCount" begin="1" end="31" step="1">
												<f:selectItem itemValue="#{LoopCount}" itemLabel="#{LoopCount}"/>
										</c:forEach>
									</h:selectOneMenu>
								</h:panelGroup>
								<!-- Email -->
								<h:column/><rich:message for="EmailTo" id="email_addr_msg"/>
								<h:outputText value="Send Reminder To" styleClass="boldpx"/>
								 <h:panelGroup> 
									<h:inputText id="email" value="#{hotListBean.sendResultsTo}" size="40" maxlength="100"/>
								</h:panelGroup> 
							</h:panelGrid>
						</h:panelGroup>
						
					
					  
					<h:panelGroup styleClass="textAlignCenter" style="text-align:center" rendered="#{not empty calendarBean.event and calendarBean.event eq 'calendar'}">
						<a4j:commandButton value=" " styleClass="saveButtonImage"   execute="@form" action="#{calendarController.updateCalendarEvent(request)}" oncomplete="#{rich:component('editEvent')}.hide();#{rich:component('message')}.show();" render="myEventRender,calPanelTabRender,addEventForm:message" 
						onclick="javascript:return validateEventForm('editEventForm')"/>
						
						<a4j:commandButton value=" " styleClass="deleteButtonImage" execute="@form"   onclick="#{rich:component('editEvent')}.hide();" oncomplete="#{rich:component('confirmPanel')}.show();" render="@none" limitRender="true"/>
						
						<h:commandButton value=" " styleClass="cancelButtonImage" onclick="#{rich:component('editEvent')}.hide(); return false;"/>
					
					</h:panelGroup>
					
					<h:panelGroup styleClass="textAlignCenter" style="text-align:center" rendered="#{not empty calendarBean.event and calendarBean.event eq 'project'}"> 
						<a4j:commandButton value=" " styleClass="saveButtonImage"   execute="@form" action="#{calendarController.updateCalendarEvent(request)}"  
						onclick="return validateEventForm('editEventForm')" oncomplete="editedEventCal()"/>
						
						<a4j:commandButton value=" " styleClass="deleteButtonImage" execute="@form"   oncomplete="#{rich:component('confirmPanel')}.show();" render="@none" limitRender="true"/>
						
						<h:commandButton value=" " styleClass="cancelButtonImage" onclick="window.close();"/>
					
					</h:panelGroup>
					
				</h:panelGrid> 
			</rich:tab>
		 </rich:tabPanel>
		 <h:outputScript name="calendar/add_event.js?v=4.7" library="js" target="head"/> 
	 	<h:outputScript name="jquery-1.11.3.min.js" library="jquery-ui-1.8.16.custom"/>
	<h:outputScript> 
	
		setFormId("editEventForm");
		if(document.getElementById('editEventForm:reminder:2').checked)
		{	 
			$(document).ready(function(){ 
				  $( ".emailHotList").show(1000);
				$( ".hideClass").show(1000);	 
			});
		}
		setHotListReminder('#{calendarBean.calendarId}','#{userBean.loginEmail}')
	</h:outputScript>
	 
</ui:composition>